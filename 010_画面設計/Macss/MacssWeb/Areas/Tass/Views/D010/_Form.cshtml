@model Macss.Database.Entity.AccountMaster

@Html.AntiForgeryToken()

<!--テスト値-->
@{ var testVal = string.Empty; }

<div>
    @Html.ValidationSummary(false, "入力エラーがあります。", new { @class = "alert alert-danger" })
    <!--
    <div class="alert alert-danger validation-summary-errors" data-valmsg-summary="true">
        <span>既に登録されています。</span>
    </div>
        -->
</div>

<div class="row justify-content-between macss-form-button-group-row">
    <div class="col-4">
        <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#TransitionConfirmDialog">@MacssWeb.Resources.ControlText.BackToList</button>
    </div>
    <div class="col-4 text-right">
        <button type="submit" class="btn btn-primary ctrl-item" disabled>@MacssWeb.Resources.ControlText.InputConfirm</button>
    </div>
</div>

<table class="table macss-form-table2">
    <colgroup>
        <col class="macss-form-table-title2" />
        <col class="macss-form-table-contents2" />
        <col class="macss-form-table-title2" />
        <col class="macss-form-table-contents2" />
    </colgroup>

    @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
    {
        <tr>
            <th scope="row">
                <label class="control-label required">出荷No</label>
            </th>
            <td colspan="3">
                <div class="row">
                    <div class="col-4">
                        <div class="input-group">
                            <input class="form-control text-box single-line" id="syukka_no" name="syukka_no" type="text" value="">
                            <div class="input-group-append">
                                <button type="button" class="btn btn-outline-secondary" data-toggle="modal" data-target="#" id="search" title="参照">
                                    <i class="fas fa-redo-alt"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <small class="form-text text-muted">
                        出荷Noを入力し、右隣の参照ボタンをクリックすると出荷情報を参照します。
                    </small>
                </div>
            </td>
        </tr>
    }
    else
    {
        <tr>
            <th scope="row">
                <label class="control-label">出荷No</label>
            </th>
            <td colspan="3">
                <div>
                    @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                    {
                    }
                    else
                    {
                        <div>05260</div>
                    }
                </div>
            </td>
        </tr>
    }
    <tr>
        <th scope="row">
            <label class="control-label">出荷日</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">2021/03/02</div>
                }
                else
                {
                    <div>2021/03/02</div>
                }
            </div>
        </td>
        <th scope="row">
            <label class="control-label">手配No</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">Q8623800</div>
                }
                else
                {
                    <div>Q8623800</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">出荷場所</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">S2 ＦＢ）丸子出張所</div>
                }
                else
                {
                    <div>S2 ＦＢ）丸子出張所</div>
                }
            </div>
        </td>
        <th scope="row">
            <label class="control-label">オリジナル出荷No</label>
        </th>
        <td>
            <div>

            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">運送方法</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">31 ヤマト運輸</div>
                }
                else
                {
                    <div>31 ヤマト運輸</div>
                }
            </div>
        </td>
        <th scope="row">
            <label class="control-label">運送コース</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">M Ｍコース【四日市定期便】</div>
                }
                else
                {
                    <div>M Ｍコース【四日市定期便】</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">仕入先</label>
        </th>        
        <td colspan="3">
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">77571 小鈴産業（株）</div>
                }
                else
                {
                    <div>77571 小鈴産業（株）</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">運送区分</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">2100 路線便　　　　傭車・路線便全般</div>
                }
                else
                {
                    <div>2100 路線便　　　　傭車・路線便全般</div>
                }
            </div>
        </td>
        <th scope="row">
            <label class="control-label">得意先</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">17601 ＦＥ）半導体営業　（松本・ＤＳ）</div>
                }
                else
                {
                    <div>17601 ＦＥ）半導体営業　（松本・ＤＳ）</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">届先会社名</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">㈱エイシーエスエヌ</div>
                }
                else
                {
                    <div>㈱エイシーエスエヌ</div>
                }
            </div>
        </td>
        <th scope="row">
            <label class="control-label">届先住所</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">東京都千代田区神田小川町６－１２－１　アンリビル３Ｆ</div>
                }
                else
                {
                    <div>東京都千代田区神田小川町６－１２－１　アンリビル３Ｆ</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">品名コード</label>
        </th>
        <td>
            <div>

            </div>
        </td>
        <th scope="row">
            <label class="control-label">品名</label>
        </th>
        <td>
            <div>

            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">機種コードA</label>
        </th>
        <td>
            <div>

            </div>
        </td>
        <th scope="row">
            <label class="control-label">包装数</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">3</div>
                }
                else
                {
                    <div>3</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">重量</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">3.00</div>
                }
                else
                {
                    <div>3.00</div>
                }
            </div>
        </td>
        <th scope="row">
            <label class="control-label">詰合せ代表出荷No</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">05260</div>
                }
                else
                {
                    <div>05260</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">出荷括りNo</label>
        </th>
        <td>
            <div>

            </div>
        </td>
        <th scope="row">
            <label class="control-label">出荷数</label>
        </th>
        <td>
            <div>
                @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                {
                    <div class="ctrl-hide">1</div>
                }
                else
                {
                    <div>1</div>
                }
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">ベースNo</label>
        </th>
        <td>
            <div>

            </div>
        </td>
        <th scope="row">
            <label class="control-label">出荷指示番号</label>
        </th>
        <td>
            <div>

            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">運送会社名</label>
        </th>
        <td>
            <div>
                <div class="input-group">
                    <input class="form-control text-box single-line ctrl-item00" id="IDName1" name="IDName" type="text" value="@testVal" disabled>
                </div>
            </div>
        </td>
        <th scope="row">
            <label class="control-label">車両番号</label>
        </th>
        <td>
            <div>
                <div class="input-group">
                    <input class="form-control text-box single-line ctrl-item00" id="IDName2" name="IDName" type="text" value="@testVal" disabled>
                </div>
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">ドライバー名</label>
        </th>
        <td>
            <div>
                <div class="input-group">
                    <input class="form-control text-box single-line ctrl-item00" id="IDName3" name="IDName" type="text" value="@testVal" disabled>
                </div>
                <div>
                    <small class="form-text text-muted">
                        ※個人情報に当たる為、相手方の了解を得てから入力してください。
                    </small>
                </div>
            </div>
        </td>
        <th scope="row">
            <label class="control-label">ドライバー連絡用電話番号</label>
        </th>
        <td>
            <div>
                <div class="input-group">
                    <input class="form-control text-box single-line ctrl-item00" id="IDName4" name="IDName" type="text" value="@testVal" disabled>
                </div>
            </div>
            <div>
                <small class="form-text text-muted">
                    ※個人情報に当たる為、相手方の了解を得てから入力してください。
                </small>
            </div>
        </td>
    </tr>
    <tr>
        <th scope="row">
            <label class="control-label">仕入先原票No</label>
        </th>
        <td colspan="3">
            <!--
            <div>
                <div class="custom-control-inline">
                    <input class="form-control text-box single-line ctrl-item ctrl-item01" id="IDName" name="IDName" type="text" value="" disabled>
                    <input class="btn btn-primary ctrl-item ctrl-item01" id="IDAdd" type="button" value="追加" disabled>
                    <input class="btn btn-danger ctrl-item ctrl-item01" id="IDDelete" type="button" value="削除" disabled>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input ctrl-item ctrl-item01" type="checkbox" id="IDContinuousInput" name="IDContinuousInput" checked disabled>連続入力する
                </div>
                <div class="col-4">
                    <select class="custom-select form-control" id="IDListBox" size="10" multiple>
                        @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                        {
                        }
                        else
                        {
                            <option value="0">29-00019</option>
                            <option value="1">29-00020</option>
                            <option value="2">29-00021</option>
                        }
                    </select>
                </div>
            </div>

            -->
            <div>
                <!--
    <div class="mb-2">
        <small class="form-text text-muted">
            ※バーコードリーダー取込の場合、下記のテキストボックスを選択してから取込を行ってください。
            <br>　手入力の場合、下記のテキストボックスに値を入力してキーボードの「Enter」キーを押下してください。
            <br>　値は下記のリストに追加されます。続けて下記のテキストボックスから連続入力が可能です。
        </small>
    </div>
    -->
                <div class="custom-control-inline">
                    <input class="form-control text-box single-line ctrl-item ctrl-item01" id="IDName" name="IDName" type="text" value="" disabled>
                    <input class="btn btn-primary ctrl-item ctrl-item01" id="IDAdd" type="button" value="追加" disabled>
                </div>
                <div class="col-4">
                    <select class="custom-select form-control ctrl-item ctrl-item01" id="IDListBox" size="10" multiple disabled>
                        @if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
                        {
                        }
                        else
                        {
                            <option value="0">158444511481</option>
                            <option value="1">158444511492</option>
                            <option value="2">158444511503</option>
                        }
                    </select>
                    <div class="mt-2">
                        <input class="btn btn-danger ctrl-item ctrl-item01" id="IDDelete" type="button" value="選択削除" disabled>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>

<div class="row justify-content-between macss-form-button-group-row">
    <div class="col-4">
        <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#TransitionConfirmDialog">@MacssWeb.Resources.ControlText.BackToList</button>
    </div>
    <div class="col-8 text-right">
        <button type="submit" class="btn btn-primary ctrl-item" disabled>@MacssWeb.Resources.ControlText.InputConfirm</button>
    </div>
</div>

<div class="modal" id="TransitionConfirmDialog" tabindex="-1" role="dialog" aria-labelledby="ConfirmDialogTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ConfirmDialogTitle">@MacssWeb.Resources.Title.TransitionConfirm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @MacssWeb.Resources.Messages.TransitionConfirm
                <br>
                @MacssWeb.Resources.Messages.Confirm
            </div>
            <div class="modal-footer">
                <a class="btn btn-primary macss-btn" href="@Url.Action("Index")" role="button">@MacssWeb.Resources.ControlText.Yes</a>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">@MacssWeb.Resources.ControlText.No</button>
            </div>
        </div>
    </div>
</div>
@if ((ViewBag.CreateFlg != null || ViewBag.CreateFlg == true))
{
    <div id="create" style="display:none">1</div>
}
else
{
    <div id="create" style="display:none">0</div>
}


<script>
    $(function () {
        //バーコードリーダ取込時に末尾に付加される文字は「Enter」キーです。

        const KEY_ENTER = 13; //Enterキー
        //const KEY_TAB = 9; //TABキー

        var m_TargetKey = KEY_ENTER;
        //var m_TargetKey = KEY_TAB;


        function CheckIDName(val) {
            var result = '';
            if (val.length > 0) {
                //一文字以上入力されていればいったんOKとする
                if (val.length > 1) {
                    result = val;
                }
            }
            return result;
        }


        $(".ctrl-hide").hide();

        if ($('#create').html() == "0") {
            $(".ctrl-item").prop("disabled", false);

            //差し替え時
            //$(".ctrl-item00").prop("disabled", false);
            //$(".ctrl-item01").prop("disabled", true);
            //$("#IDName1").val("青帽松本");
            //$("#IDName2").val("松本い１２３４");
            //$("#IDName3").val("長野太郎");
            //$("#IDName4").val("090-9988-4455");
            //$("#IDListBox").html('');

        }

        $('#search').click(function () {
            $('#syukka_no').val("05260");
            $('#syukka_no').prop("disabled", true);
            $('#search').prop("disabled", true);
            $(".ctrl-item").prop("disabled", false);

            //差し替え時
            //$(".ctrl-item00").prop("disabled", false);
            //$(".ctrl-item01").prop("disabled", true);


            $(".ctrl-hide").show();
        })
               
        $('#IDDelete').click(function () {
            $('#IDListBox').children(':selected').remove();
        })

        $('#IDAdd').click(function () {
            var e_time;
            e_time = new Date();
            e_time.getTime();
            val = CheckIDName($('#IDName').val().trim());
            if (val.length > 0) {
                $('#IDListBox').append('<option value="' + e_time.getTime() + '">' + val + '</option>');
                $('#IDName').val('');
            }
        })

        //手入力、バーコードリーダのEnterキーおよびバーコードリーダのTabキー用（手入力ではタブキーのkeypressが対応していない為）
        $('#IDName').keypress(function (e) {
            var val = '';
            var e_time;

            //if (e.which == m_TargetKey) {
            if (e.keyCode == m_TargetKey) {
                e_time = new Date();
                e_time.getTime();

                val = CheckIDName($('#IDName').val().trim());
                if (val.length > 0) {
                    $('#IDListBox').append('<option value="' + e_time.getTime() + '">' + val + '</option>');
                    $('#IDName').val('');
                }

                //対象のキーがエンターキーの場合、FormをSubmitさせない
                //対象のキーがTabキーの場合、タブ遷移させない
                return false;
            }
        });


           ////Beep音の再生
        //$('#BeepSound').click(function () {
        //    new Audio("data:audio/wav;base64,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").play();
        //})

        //$('#Clear').click(function () {
        //    $('#IDListBox').html('');
        //})

        ////tabキー手入力された場合用（手入力ではタブキーのkeypressが対応していない為）
        //$('#IDName').keydown(function (e) {
        //    var val = '';
        //    var e_time;

        //    //if (e.which == m_TargetKey) {
        //    //if (e.keyCode == m_TargetKey) {KEY_TAB
        //    if (m_TargetKey == KEY_TAB && e.keyCode == KEY_TAB) {

        //        e_time = new Date();
        //        e_time.getTime();

        //        val = CheckIDName($('#IDName').val().trim());
        //        if (val.length > 0) {
        //            $('#IDListBox').append('<option value="' + e_time.getTime() + '">' + val + '</option>');
        //            $('#IDName').val('');
        //        }

        //        //対象のキーがTabキーの場合、タブ遷移させない
        //        return false;
        //    }
        //});       

        ////バーコードリーダー取込模倣処理
        //$('#Barcode').click(function () {
        //    var val = '';
        //    var e_time;

        //    e_time = new Date();

        //    val = CheckIDName(e_time.getTime().toString());

        //    if (val.length > 0) {
        //        $('#IDName').focus();
        //        $('#IDName').val(val);
        //        //キー入力イベント（バーコードリーダはkeypressでデータが来る。キーダウンとかキーアップはない。）
        //        var evt = $.Event('keypress');
        //        evt.keyCode = m_TargetKey;
        //        $('#IDName').trigger(evt);
        //        ////キー入力イベント
        //        //var evt = $.Event('keydown');
        //        //evt.which = m_TargetKey;
        //        //$('#TestNo').trigger(evt);


        //        $('#IDName').val('');
        //    }
        //    else {
        //        //ビープ音
        //        //$('#IDName').focus();
        //        //$('#IDName').val('');
        //    }
        //})

    });

</script>
